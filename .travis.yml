sudo: true
language: cpp
os: linux
addons:
  apt:
    sources:
    packages:
    - build-essential
    - mpich
    - libmpich-dev
install: true
git:
  depth: 3
jobs:
  include:
    - stage: unit-tests
      script:
      - sudo curl -sSL https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz | sudo tar -xzC /opt
      - export PATH=/opt/cmake-3.5.2-Linux-x86_64/bin:$PATH
      - export LD_LIBRARY_PATH=/opt/cmake-3.5.2-Linux-x86_64/lib:$LD_LIBRARY_PATH
      - HOME_DIR=`pwd`
      - BUILD_DIR="${HOME_DIR}/Build"
      - mkdir ${BUILD_DIR}
      - ./Tools/Tests/build-and-run-unit-test-parallel-grid.sh ${HOME_DIR} ${BUILD_DIR} mpicxx mpicc ON
    - stage: unit-tests
      script:
      - sudo curl -sSL https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz | sudo tar -xzC /opt
      - export PATH=/opt/cmake-3.5.2-Linux-x86_64/bin:$PATH
      - export LD_LIBRARY_PATH=/opt/cmake-3.5.2-Linux-x86_64/lib:$LD_LIBRARY_PATH
      - HOME_DIR=`pwd`
      - BUILD_DIR="${HOME_DIR}/Build"
      - mkdir ${BUILD_DIR}
      - ./Tools/Tests/build-and-run-unit-test-parallel-grid.sh ${HOME_DIR} ${BUILD_DIR} mpicxx mpicc OFF
    - stage: unit-tests
      script:
      - sudo curl -sSL https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz | sudo tar -xzC /opt
      - export PATH=/opt/cmake-3.5.2-Linux-x86_64/bin:$PATH
      - export LD_LIBRARY_PATH=/opt/cmake-3.5.2-Linux-x86_64/lib:$LD_LIBRARY_PATH
      - HOME_DIR=`pwd`
      - BUILD_DIR="${HOME_DIR}/Build"
      - mkdir ${BUILD_DIR}
      - ./Tools/Tests/build-and-run-unit-test-grid.sh ${HOME_DIR} ${BUILD_DIR} mpicxx mpicc ON
    - stage: unit-tests
      script:
      - sudo curl -sSL https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz | sudo tar -xzC /opt
      - export PATH=/opt/cmake-3.5.2-Linux-x86_64/bin:$PATH
      - export LD_LIBRARY_PATH=/opt/cmake-3.5.2-Linux-x86_64/lib:$LD_LIBRARY_PATH
      - HOME_DIR=`pwd`
      - BUILD_DIR="${HOME_DIR}/Build"
      - mkdir ${BUILD_DIR}
      - ./Tools/Tests/build-and-run-unit-test-grid.sh ${HOME_DIR} ${BUILD_DIR} mpicxx mpicc OFF
    - stage: unit-tests
      script:
      - sudo curl -sSL https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz | sudo tar -xzC /opt
      - export PATH=/opt/cmake-3.5.2-Linux-x86_64/bin:$PATH
      - export LD_LIBRARY_PATH=/opt/cmake-3.5.2-Linux-x86_64/lib:$LD_LIBRARY_PATH
      - HOME_DIR=`pwd`
      - BUILD_DIR="${HOME_DIR}/Build"
      - mkdir ${BUILD_DIR}
      - ./Tools/Tests/build-and-run-unit-test-dumpers-loaders.sh ${HOME_DIR} ${BUILD_DIR} mpicxx mpicc ON
    - stage: unit-tests
      script:
      - sudo curl -sSL https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz | sudo tar -xzC /opt
      - export PATH=/opt/cmake-3.5.2-Linux-x86_64/bin:$PATH
      - export LD_LIBRARY_PATH=/opt/cmake-3.5.2-Linux-x86_64/lib:$LD_LIBRARY_PATH
      - HOME_DIR=`pwd`
      - BUILD_DIR="${HOME_DIR}/Build"
      - mkdir ${BUILD_DIR}
      - ./Tools/Tests/build-and-run-unit-test-dumpers-loaders.sh ${HOME_DIR} ${BUILD_DIR} mpicxx mpicc OFF
dist: trusty
